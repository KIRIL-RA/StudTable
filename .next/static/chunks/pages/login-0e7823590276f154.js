(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return c(4984)}])},4984:function(a,b,c){"use strict";c.r(b);var d=c(5893),e=c(2175),f=c(4231),g=c(1163),h=c.n(g),i=c(7294),j=c(4070),k=c.n(j),l=c(1617),m=function(){var a=(0,i.useState)(""),b=a[0],c=a[1];(0,i.useEffect)(function(){fetch("".concat(l.API_HOST,"/checklogin")).then(function(a){return a.json()}).then(function(a){return"100"===a.statusCode?h().push("/timetable"):null})},[]);var g=(0,e.TA)({initialValues:{username:"",password:""},validationSchema:f.Ry({username:f.Z_().required("Обязательное поле!"),password:f.Z_().required("Обязательное поле!")}),onSubmit:function(a){var b="/login?username=".concat(a.username,"&password=").concat(a.password);fetch("".concat(l.API_HOST).concat(b)).then(function(a){return a.json()}).then(function(a){"100"===a.statusCode&&h().push("/timetable"),"110"===a.statusCode&&c("Неправильное имя пользователя или пароль"),"100"!==a.statusCode&&"110"!==a.statusCode&&c("Что-то не так, перезагрузите страницу")})}});return(0,i.useEffect)(function(){(g.touched.username||g.touched.password)&&c("")},[g.values.username,g.values.password]),(0,d.jsxs)("div",{className:k().login__wrapper,children:[(0,d.jsx)("h1",{className:k().login__title,children:"StubTable!"}),(0,d.jsxs)("form",{onSubmit:g.handleSubmit,className:k().form__wrapper,children:[(0,d.jsx)("input",{className:k().form__input,type:"text",value:g.values.username,onChange:g.handleChange,onBlur:g.handleBlur,name:"username",placeholder:"Имя пользователя"}),g.errors.username&&g.touched.username?(0,d.jsx)("div",{className:k().form__error,children:g.errors.username}):null,(0,d.jsx)("input",{className:k().form__input,type:"text",value:g.values.password,onChange:g.handleChange,onBlur:g.handleBlur,name:"password",placeholder:"Пароль"}),g.errors.password&&g.touched.password?(0,d.jsx)("div",{className:k().form__error,children:g.errors.password}):null,""!==b?(0,d.jsx)("div",{className:k().form__error,children:b}):null,(0,d.jsx)("button",{type:"submit",className:k().form__button,children:"Войти"})]})]})};b.default=m},4070:function(a){a.exports={login__wrapper:"login_login__wrapper__ngAPz",login__title:"login_login__title__C3B_B",form__wrapper:"login_form__wrapper__g1r8i",form__input:"login_form__input__1AyKk",form__button:"login_form__button__rJknA",form__error:"login_form__error__TZwJH"}},1617:function(a){"use strict";a.exports={API_HOST:"/api"}}},function(a){a.O(0,[332,774,888,179],function(){var b;return a(a.s=6429)}),_N_E=a.O()}])