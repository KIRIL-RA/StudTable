(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[907],{4508:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/registration",function(){return c(5256)}])},2138:function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}c.d(b,{Z:function(){return i}});var e=c(4051),f=c.n(e),g=c(7294),h=function(){var a,b;return{request:g.useCallback((b=(a=f().mark(function a(b){var c,d,e,g,h,i=arguments;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=i.length>1&& void 0!==i[1]?i[1]:"GET",d=i.length>2&& void 0!==i[2]?i[2]:null,e=i.length>3&& void 0!==i[3]?i[3]:{"Content-Type":"application/json"},a.prev=1,a.next=4,fetch(b,{method:c,body:d,headers:e});case 4:if((g=a.sent).ok){a.next=7;break}throw Error("Could not fetch ".concat(b,", status: ").concat(g.status));case 7:return a.next=9,g.json();case 9:return h=a.sent,a.abrupt("return",h);case 13:throw a.prev=13,a.t0=a.catch(1),a.t0;case 16:case"end":return a.stop()}},a,null,[[1,13]])}),function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function h(a){d(g,e,f,h,i,"next",a)}function i(a){d(g,e,f,h,i,"throw",a)}h(void 0)})}),function(a){return b.apply(this,arguments)}),[])}},i=h},5256:function(a,b,c){"use strict";c.r(b);var d=c(5893),e=c(2175),f=c(4231),g=c(7294),h=c(2138),i=c(3787),j=c.n(i),k=c(1163),l=c.n(k),m=c(1617),n=function(){(0,g.useEffect)(function(){fetch("".concat(m.API_HOST,"/checklogin")).then(function(a){return a.json()}).then(function(a){return"100"===a.statusCode?l().push("/timetable"):null})},[]);var a=(0,h.Z)().request,b=(0,g.useState)([]),c=b[0],i=b[1],k=(0,g.useState)([]),n=k[0],o=k[1],p=(0,g.useState)([]),q=p[0],r=p[1],s=(0,g.useState)(""),t=s[0],u=s[1],v=(0,e.TA)({initialValues:{username:"",email:"",password:"",confirmPassword:"",accountType:"",firstName:"",secondName:"",lastName:"",academy:"",faculty:"",direction:"",groupe:"",course:"",studentIdNumber:""},validationSchema:f.Ry({username:f.Z_().required("Введите имя пользователя!"),email:f.Z_().required("Введите почту!"),password:f.Z_().required("Введите пароль!"),confirmPassword:f.Z_().oneOf([f.iH("password"),null],"Пароль должен совпадать!").required("Подтвердите пароль!"),accountType:f.Z_().required("Выберете тип аккаунта!"),firstName:f.Z_().required("Введите имя!"),secondName:f.Z_().required("Введите фамилию!"),lastName:f.Z_().required("Введите отчество!"),academy:f.Z_().required("Выберете университет!"),faculty:f.Z_().required("Выберете факультет!"),direction:f.Z_().required("Выберете направление!"),groupe:f.Z_().required("Введите группу!"),course:f.Z_().required("Выберете курс!"),studentIdNumber:f.Z_().required("Введите номер студенческого!")}),onSubmit:function(b){var c={userName:v.values.username,email:v.values.email,password:v.values.password,accountType:v.values.accountType,academyInfo:{id:v.values.academy,directionId:v.values.direction,group:v.values.groupe,faculty:v.values.faculty,course:v.values.course,studentIdNumber:v.values.studentIdNumber},realInfo:{firstName:v.values.firstName,secondName:v.values.secondName,lastName:v.values.lastName}};a("".concat(m.API_HOST,"/registryuser"),"POST",JSON.stringify(c)).then(function(a){"100"===a.statusCode?l().push("/login"):u(a.Status)})}});(0,g.useEffect)(function(){a("".concat(m.API_HOST,"/getacademyinfo"),"POST",JSON.stringify({request:"ga"})).then(function(a){return i(a.data)})},[]),(0,g.useEffect)(function(){if(v.values.academy){var b={request:"gf",academyId:v.values.academy};a("".concat(m.API_HOST,"/getacademyinfo"),"POST",JSON.stringify(b)).then(function(a){return o(a.data)})}},[v.values.academy]),(0,g.useEffect)(function(){if(v.values.academy&&v.values.faculty){var b={request:"gd",academyId:v.values.academy,faculty:v.values.faculty};a("".concat(m.API_HOST,"/getacademyinfo"),"POST",JSON.stringify(b)).then(function(a){return r(a.data)})}},[v.values.faculty]);var w=c.map(function(a){return(0,d.jsx)("option",{value:a.id,children:a.name},a.id)}),x=Object.keys(n).map(function(a){var b;return(0,d.jsx)("option",{value:a,children:null===(b=n[a])|| void 0===b?void 0:b.name},a)}),y=Object.keys(q).map(function(a){var b;return(0,d.jsx)("option",{value:a,children:null===(b=q[a])|| void 0===b?void 0:b.name},a)});return(0,d.jsxs)("div",{className:j().pageWrapper,children:[(0,d.jsx)("h1",{children:"Добро пожаловать в Studtable!"}),(0,d.jsx)("h3",{children:"Пройдите регистрацию перед началом"}),t?(0,d.jsx)("div",{className:j().error,children:t}):null,(0,d.jsxs)("form",{onSubmit:v.handleSubmit,className:j().formWrapper,children:[(0,d.jsx)("input",{className:j().input,name:"username",placeholder:"Логин",onChange:v.handleChange,onBlur:v.handleBlur}),v.errors.username&&v.touched.username?(0,d.jsx)("div",{className:j().error,children:v.errors.username}):null,(0,d.jsx)("input",{className:j().input,name:"email",placeholder:"Почта",onChange:v.handleChange,onBlur:v.handleBlur}),v.errors.email&&v.touched.email?(0,d.jsx)("div",{className:j().error,children:v.errors.email}):null,(0,d.jsx)("input",{className:j().input,name:"password",placeholder:"Пароль",onChange:v.handleChange,onBlur:v.handleBlur}),v.errors.password&&v.touched.password?(0,d.jsx)("div",{className:j().error,children:v.errors.password}):null,(0,d.jsx)("input",{className:j().input,name:"confirmPassword",placeholder:"Подтвердите пароль",onChange:v.handleChange,onBlur:v.handleBlur}),v.errors.confirmPassword&&v.touched.confirmPassword?(0,d.jsx)("div",{className:j().error,children:v.errors.confirmPassword}):null,(0,d.jsxs)("select",{className:j().select,name:"accountType",onChange:v.handleChange,onBlur:v.handleBlur,children:[(0,d.jsx)("option",{value:"",children:"Выберите тип аккаунта"}),(0,d.jsx)("option",{value:"Student",children:"Студент"}),(0,d.jsx)("option",{value:"GroupHeadman",children:"Староста"})]}),v.errors.accountType&&v.touched.accountType?(0,d.jsx)("div",{className:j().error,children:v.errors.accountType}):null,(0,d.jsx)("input",{className:j().input,name:"firstName",placeholder:"Имя",onChange:v.handleChange,onBlur:v.handleBlur}),v.errors.firstName&&v.touched.firstName?(0,d.jsx)("div",{className:j().error,children:v.errors.firstName}):null,(0,d.jsx)("input",{className:j().input,name:"secondName",placeholder:"Фамилия",onChange:v.handleChange,onBlur:v.handleBlur}),v.errors.secondName&&v.touched.secondName?(0,d.jsx)("div",{className:j().error,children:v.errors.secondName}):null,(0,d.jsx)("input",{className:j().input,name:"lastName",placeholder:"Отчество",onChange:v.handleChange,onBlur:v.handleBlur}),v.errors.lastName&&v.touched.lastName?(0,d.jsx)("div",{className:j().error,children:v.errors.lastName}):null,(0,d.jsxs)("select",{className:j().select,name:"academy",onChange:v.handleChange,onBlur:v.handleBlur,children:[(0,d.jsx)("option",{value:"",children:"Выберите университет"}),w]}),v.errors.academy&&v.touched.academy?(0,d.jsx)("div",{className:j().error,children:v.errors.academy}):null,v.values.academy?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("select",{className:j().select,name:"faculty",onChange:v.handleChange,onBlur:v.handleBlur,children:[(0,d.jsx)("option",{value:"",children:"Выберите факультет"}),x]}),v.errors.faculty&&v.touched.faculty?(0,d.jsx)("div",{className:j().error,children:v.errors.faculty}):null]}):null,v.values.faculty?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("select",{className:j().select,name:"direction",onChange:v.handleChange,onBlur:v.handleBlur,children:[(0,d.jsx)("option",{value:"",children:"Выберите направление"}),y]}),v.errors.direction&&v.touched.direction?(0,d.jsx)("div",{className:j().error,children:v.errors.direction}):null]}):null,v.values.direction?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{name:"groupe",className:j().input,placeholder:"Группа",onChange:v.handleChange,onBlur:v.handleBlur}),v.errors.groupe&&v.touched.groupe?(0,d.jsx)("div",{className:j().error,children:v.errors.groupe}):null,(0,d.jsxs)("select",{className:j().select,name:"course",onChange:v.handleChange,onBlur:v.handleBlur,children:[(0,d.jsx)("option",{value:"",children:"Выберите курс"}),(0,d.jsx)("option",{value:"1",children:"1"}),(0,d.jsx)("option",{value:"2",children:"2"}),(0,d.jsx)("option",{value:"3",children:"3"}),(0,d.jsx)("option",{value:"4",children:"4"})]}),v.errors.course&&v.touched.course?(0,d.jsx)("div",{className:j().error,children:v.errors.course}):null,(0,d.jsx)("input",{className:j().input,name:"studentIdNumber",placeholder:"Номер студенческого",onChange:v.handleChange,onBlur:v.handleBlur}),v.errors.studentIdNumber&&v.touched.studentIdNumber?(0,d.jsx)("div",{className:j().error,children:v.errors.studentIdNumber}):null]}):null,(0,d.jsx)("button",{type:"submit",className:j().button,children:"Подтвердить"})]})]})};b.default=n},3787:function(a){a.exports={pageWrapper:"registration_pageWrapper__ZbIz5",input:"registration_input__F0Hkd",button:"registration_button__XqPaz",select:"registration_select__IIhG4",error:"registration_error__ftuLS",formWrapper:"registration_formWrapper__js3n1"}},1617:function(a){"use strict";a.exports={API_HOST:"/api"}}},function(a){a.O(0,[332,774,888,179],function(){var b;return a(a.s=4508)}),_N_E=a.O()}])